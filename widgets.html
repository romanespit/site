<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=10">
    <meta property="og:type" content="website">
    <meta property="og:title" content="New widgets">
    <meta property="og:description" content="Under construction... üî®">
    <meta property="og:site_name" content="kiacode.space">
    <meta property="og:url" content="https://kiacode.space/widgets">
    <meta property="og:image" content="https://raw.githubusercontent.com/romanespit/site/main/img/prev/development.jpg">
    <title>üî® New widgets üî®</title>    
    <link rel="stylesheet" href="css/utils.css">
	<script src="https://yookassa.ru/checkout-widget/v1/checkout-widget.js"></script>
    <link rel="preconnect" href="https://yoomoney.ru/checkout/checkout-ui" crossorigin="anonymous">
    <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
    <link href="/manifest.json" rel="yandex-tableau-widget">
    <link rel="icon" href="img/kassa.png">
    <script src="js/jscolor.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="background-color: #1A3D8A" fill="white">
                <g>
                    <path d="m319.635877,112.750002c-79.784849,0 -143.250002,64.371967 -143.250002,143.250002c0,79.784849 64.371967,143.250002 143.250002,143.250002c78.878363,0 143.250002,-64.371967 143.250002,-143.250002c0,-78.878035 -64.37164,-143.250002 -143.250002,-143.250002zm0,195.835523c-29.012464,0 -53.491843,-24.479379 -53.491843,-53.492334c0,-29.012464 24.479379,-53.491843 53.491843,-53.491843c29.012791,0 53.49217,24.479379 53.49217,53.491843c-0.906813,29.919277 -24.479379,53.492334 -53.49217,53.492334z"/>
                    <path d="m174.519002,151.464652l0,209.070694l-50.904363,0l-65.447969,-209.070694l116.352332,0z"/>
                </g>
            </svg>
            <div>
                <h1>widgets</h1>
                <p><a href="/utilities"><span class="social-logo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentcolor">
                        <polygon points="6.414 13 12.707 19.293 11.293 20.707 2.586 12 11.293 3.293 12.707 4.707 6.414 11 21 11 21 13"/>
                    </svg>                          
                    –∫ —É—Ç–∏–ª–∏—Ç–∞–º</span></a></p>
            </div>
        </div>  
        <div class="link-bar">                
            <div class="link-row">
                <a class="socials" target="_blank" href="/widgets_old">
                    <span class="social-logo">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentcolor">
                            <polygon points="6.414 13 12.707 19.293 11.293 20.707 2.586 12 11.293 3.293 12.707 4.707 6.414 11 21 11 21 13"/>
                        </svg>                           
                    </span>
                    old
                </a>
                <a class="socials" target="_blank" href="https://yookassa.ru/developers/payment-acceptance/integration-scenarios/widget/quick-start">
                    <span class="social-logo">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentcolor">
                            <path fill-rule="evenodd" d="M21,22 L6,22 C4.34314575,22 3,20.6568542 3,19 L3,5 C3,3.34314575 4.34314575,2 6,2 L21,2 L20.9999995,18 C20.4477153,18 20,18.4477153 20,19 C20,19.5522847 20.4477153,20 21,20 L21,22 Z M18,19 C18,18.6493646 18.0601542,18.3127789 18.1707057,18 L6,18 C5.44771525,18 5,18.4477153 5,19 C5,19.5522847 5.44771525,20 6,20 L18.1707057,20 C18.0601542,19.6872211 18,19.3506354 18,19 Z M19,4 L6,4 C5.44771525,4 5,4.44771525 5,5 L5,16.1707057 C5.31277893,16.0601542 5.64936458,16 6,16 L19,16 L19,4 Z"/>
                        </svg>                          
                    </span>
                    –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
                </a>
                <a class="socials" target="_blank" href="https://github.com/romanespit/site/blob/main/docs/widgets-howto.md#–∫–∞–∫-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-—Å—Ç—Ä–∞–Ω–∏—Ü—É-–≤–∏–¥–∂–µ—Ç–æ–≤">
                    <span class="social-logo">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentcolor">
                            <path fill-rule="evenodd" d="M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M12.0003283,16.9983464 C11.4478622,16.9983464 11,16.5506311 11,15.9983464 C11,15.4460616 11.4478622,14.9983464 12.0003283,14.9983464 C12.5527943,14.9983464 13.0006565,15.4460616 13.0006565,15.9983464 C13.0006565,16.5506311 12.5527943,16.9983464 12.0003283,16.9983464 Z M13,14 L11,14 C11,12.2983529 11.6245803,11.5696759 13.0527864,10.8555728 C13.8745803,10.4446759 14,10.2983529 14,9.5 C14,8.556407 13.2771608,8 12,8 C10.8954305,8 10,8.8954305 10,10 L8,10 C8,7.790861 9.790861,6 12,6 C14.2843464,6 16,7.32062807 16,9.5 C16,11.2016471 15.3754197,11.9303241 13.9472136,12.6444272 C13.1254197,13.0553241 13,13.2016471 13,14 Z"/>
                        </svg>                          
                    </span>
                    howto
                </a>
            </div>            
        </div> 
        <div class="main">
            <fieldset>
                <legend>Confirmation Token</legend><label class="toggler-wrapper style-1" style="float: right;">
                    <input type="checkbox" id="ismodal" name="ismodal" value="ismodal">
                    <div class="toggler-slider" title="–í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ">
                      <div class="toggler-knob noselect">M</div>
                    </div>
                </label>
                <div class="text-field">
                    <div class="text-field__group">
                        <input class="text-field__input" type="conftoken" id="conftoken" name="conftoken" style="width:90%;height: calc(1.5rem + 2px);" placeholder="ct-24301ae5-000f-5000-9000-13f5f1c2f8e0">
                        
                    </div>
                </div>               
            </fieldset>
        </div>
            <div class="main">
                <fieldset>
                    <legend>–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è</legend>
                    <fieldset style="border: 0px; background-color:#ffffff15">
                    <div class="text-field">
                        <label class="toggler-wrapper style-1" style="margin-bottom:5px;float: right;">
                            <input type="checkbox" id="iscolor" name="iscolor" value="iscolor">
                            <div class="toggler-slider" >
                                <div class="toggler-knob"></div>
                            </div>
                        </label>
                    </div>
                    <div class="text-field">
                        <div class="text-field__group">             
                            <input class="text-field__input jscolor" type="background" id="background" name="background" size="6" value="ffffff">
                            <label for="background" style="margin-left: 5px">–§–æ–Ω —Ñ–æ—Ä–º—ã</label>
                        </div> 
                    </div>
                    <div class="text-field">
                        <div class="text-field__group" style="padding-top: 5px">             
                            <input class="text-field__input jscolor" type="controlPrimary" id="controlPrimary" name="controlPrimary" size="6" value="ffffff">
                            <label for="controlPrimary" style="margin-left: 5px">–ö–Ω. –ó–∞–ø–ª–∞—Ç–∏—Ç—å –∏ –¥—Ä. –∞–∫—Ü–µ–Ω—Ç–Ω—ã–µ</label>
                        </div> 
                    </div>
                    <div class="text-field">
                        <div class="text-field__group" style="padding-top: 5px">             
                            <input class="text-field__input jscolor" type="controlPrimaryContent" id="controlPrimaryContent" name="controlPrimaryContent" size="6" value="ffffff">
                            <label for="controlPrimaryContent" style="margin-left: 5px">–¢–µ–∫—Å—Ç –∫–Ω. –ó–∞–ø–ª–∞—Ç–∏—Ç—å</label>
                        </div> 
                    </div>
                    <div class="text-field">
                        <div class="text-field__group" style="padding-top: 5px">             
                            <input class="text-field__input jscolor" type="controlSecondary" id="controlSecondary" name="controlSecondary" size="6" value="ffffff">
                            <labelfor="controlSecondary" style="margin-left: 5px">–¶–≤–µ—Ç –Ω–µ–∞–∫—Ü–µ–Ω—Ç–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</label>
                        </div> 
                    </div>  
                    <div class="text-field">
                        <div class="text-field__group" style="padding-top: 5px">             
                            <input class="text-field__input jscolor" type="border" id="border" name="border" size="6" value="ffffff">
                            <label for="border" style="margin-left: 5px">–¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π</label>
                        </div> 
                    </div> 
                    <div class="text-field">
                        <div class="text-field__group" style="padding-top: 5px">             
                            <input class="text-field__input jscolor" type="text" id="text" name="text" size="6" value="ffffff">
                            <label for="text" style="margin-left: 5px">–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
                        </div> 
                    </div>
                </fieldset>
                <fieldset style="border:0px; margin-top:5px">
                    <div>
                        <select class="form-text form-input" name="method" id="method">
                            <option value = "all" label = "–í—Å–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã">–í—Å–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã</option>
                            <option value = "card" label = "–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</option>
                            <option value = "sber" label = "SberPay">SberPay</option>
                            <option value = "yoo" label = "–ö–æ—à–µ–ª–µ–∫ –ÆMoney">–ö–æ—à–µ–ª–µ–∫ –ÆMoney</option>
                            <option value = "sbp" label = "–°–ë–ü">–°–ë–ü</option>
                        </select><br>–ß—Ç–æ–±—ã —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±, –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞ —à–æ–ø–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä 
                            <svg id="copyparam" title="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è" class="titled" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"  fill="currentcolor">
                            <path fill-rule="evenodd" d="M16,16 L16,20 C16,21.1522847 15.1522847,22 14,22 L4,22 C2.84771525,22 2,21.1522847 2,20 L2,10 C2,8.84771525 2.84771525,8 4,8 L8,8 L8,4 C8,2.84771525 8.84771525,2 10,2 L20,2 C21.1522847,2 22,2.84771525 22,4 L22,14 C22,15.1522847 21.1522847,16 20,16 L16,16 Z M14,16 L10,16 C8.84771525,16 8,15.1522847 8,14 L8,10 L4,10 L4,20 L14,20 L14,16 Z M10,4 L10,14 L20,14 L20,4 L10,4 Z"/>
                          </svg></p>
                    </div>
                </fieldset> 
                </fieldset>
            </div>
            <div class="main">
                <button class="text-field__btn" type="button" id="render" name="render" style="margin: 0 auto;">Render</button>
                <button class="text-field__btn" type="button" id="dwnld" name="html" style="margin-top:5px;margin: 0 auto;">HTML</button>
                <button class="text-field__btn" type="button" id="logs" name="logs" style="margin-top:5px;margin: 0 auto;">Logs</button>                
            </div>
            <div class="main ">
                    <fieldset style="border:0px">
                        <div id="render-form"></div>
                    </fieldset>
                    <div id="render-form"></div>
            </div>
        </div>     
    </div>
    <div class="footer">
        &copy;&nbsp;<script>document.write(/\d{4}/.exec(Date())[0])</script>&nbsp;&#8226;&nbsp;Made by <a href="/" target="_blank">romanespit</a> with <svg xmlns="http://www.w3.org/2000/svg" fill="#EF3E36" viewBox="0 0 16 16" style="height: 1.2em; vertical-align: middle" alt="LOVE">
            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z" />
            </svg><span style="margin: 0 0.4em;">|</span>
            <a href="https://www.donationalerts.com/r/romanespit" target="_blank" >buy me some food</a>
    </div>
    <script>
        document.querySelector("#copyparam").onclick = function() {
            navigator.clipboard.writeText("<parameter key=\"shopSettings.clientSettings.widget.allowRenderSelectedPaymentOptions\" value=\"true\"/>").then(() => {
            console.log('Content copied to clipboard');
            },() => {
            console.error('Failed to copy');
            });
        }
        backgroundSet = false;
        controlPrimarySet = false;
        controlPrimaryContentSet = false;
        controlSecondarySet = false;
        borderSet = false;
        textSet = false;
        usedcolors = false;        
        document.querySelector("#background").onclick = function() { backgroundSet = true; }
        document.querySelector("#controlPrimary").onclick = function() { controlPrimarySet = true }
        document.querySelector("#controlPrimaryContent").onclick = function() { controlPrimaryContentSet = true }
        document.querySelector("#controlSecondary").onclick = function() { controlSecondarySet = true }
        document.querySelector("#border").onclick = function() { borderSet = true }
        document.querySelector("#text").onclick = function() { textSet = true }
        rendered = false;
        token = '';	
        cust_colors = {  // default
            background: '#2B2B2E',
            border: '#b6b6b6',
            control_secondary: '#484848',
            text: '#b6b6b6',
            control_primary: '#1A3D8A',
            control_primary_content: '#FFFFFF'
        };
        render_request = {
            confirmation_token: token, 
            return_url: 'http://kiacode.space/return_url',
            customization: {
                colors: cust_colors
            },
            error_callback: function(error) {
                console.log(error)
            }
        };
        
        function download(text) {
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', 'WidgetYookassa.html');
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }        
        document.querySelector("#dwnld").onclick = function() {
            //if(token.substring(0,2) == "ct" && document.getElementById("wdg_code").value != "–°–∫–∞—á–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏") download(generateHTML());
            if(token.substring(0,2) == "ct" && rendered) download(generateHTML());
            else alert('–í–≤–µ–¥–∏—Ç–µ confirmation token –∏ –æ—Ç—Ä–∏—Å—É–π—Ç–µ –≤–∏–¥–∂–µ—Ç');            
        }
        document.querySelector("#logs").onclick = function() {
            token = document.getElementById("conftoken").value; 
            if(token.substring(0,2) == "ct")
            { 
                window.open("https://kibana.yooteam.ru/app/kibana#/discover?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-1d,to:now))&_a=(columns:!(Payload,message.message),filters:!(),index:'frontend-checkout-client-main-*',interval:auto,query:(language:lucene,query:'Payload:%20(%20%22"+token+"%22%20%22–î–æ–ø–¢—Ä–µ–π—Å%22%20)'),sort:!())");
            }
            else alert('–í–≤–µ–¥–∏—Ç–µ confirmation token!');
        }
        function generateHTML() {
        if(document.getElementById("iscolor").checked) { usedcolors = true; } else { usedcolors = false; }
            code = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">';
            code += '\n<html>';
            code += '\n\t<head>';
            code += '\n\t<meta http-equiv="Content-Type" content="text/html; charset=utf-8">';
            code += '\n\t<title>‚ù§ romanespit</title>';
            code += '\n\t<!--–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–∞ –ÆKassa-->';
            code += '\n\t<script src="https://yookassa.ru/checkout-widget/v1/checkout-widget.js">';
            code += '</scr';
            code += 'ipt>'
            code += '\n\t</head>';
            code += '\n\t<body>';
            code += '\n\t\t<p>–ù–∏–∂–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –ø–ª–∞—Ç–µ–∂–Ω–∞—è —Ñ–æ—Ä–º–∞. –ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –ø–ª–∞—Ç–µ–∂ –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ —Ç–æ–∫–µ–Ω –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–∞, –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.</p>';
            code += '\n\t\t<!--–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–ª–∞—Ç–µ–∂–Ω–∞—è —Ñ–æ—Ä–º–∞-->';
            code += '\n\t\t<div id="payment-form"></div>';
            code += '\n\t\t<p>–î–∞–Ω–Ω—ã–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã –≤ <b>—Ç–µ—Å—Ç–æ–≤–æ–º –º–∞–≥–∞–∑–∏–Ω–µ</b>:</p>';
            code += '\n\t\t<ul>';
            code += '\n\t\t\t<li>–Ω–æ–º–µ—Ä ‚Äî <b>5555 5555 5555 4477</b></li>';
            code += '\n\t\t\t<li>—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è ‚Äî <b>01/30</b> (–∏–ª–∏ –¥—Ä—É–≥–∞—è –¥–∞—Ç–∞, –±–æ–ª—å—à–µ —Ç–µ–∫—É—â–µ–π)</li>';
            code += '\n\t\t\t<li>CVC ‚Äî <b>123</b> (–∏–ª–∏ —Ç—Ä–∏ –ª—é–±—ã–µ —Ü–∏—Ñ—Ä—ã)</li>';
            code += '\n\t\t\t<li>–∫–æ–¥ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è 3-D Secure ‚Äî <b>123</b> (–∏–ª–∏ —Ç—Ä–∏ –ª—é–±—ã–µ —Ü–∏—Ñ—Ä—ã)</li>';
            code += '\n\t\t</ul>';
            code += '\n\t\t<p><a href=https://yookassa.ru/developers/payment-acceptance/testing-and-going-live/testing#test-bank-card>–î—Ä—É–≥–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã</a></p>';
            code += '\n\t\t<script>';
            code += '\n\t\t//–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞. –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ.';
            code += '\n\t\tconst checkout = new window.YooMoneyCheckoutWidget({';
            code += '\n\t\t\tconfirmation_token: \''+token;
            code += '\',\n\t\t\treturn_url: \'https://example.com/\',';
            code += '\n\t\t\tcustomization: {';
            if(document.getElementById("ismodal").checked)
            {
                code += '\n\t\t\t\tmodal: true,';
            } 
            if(usedcolors)
            {
                code += '\n\t\t\t\tcolors: {';
                hasPrev = false;
                if(backgroundSet) background = "#"+String(document.getElementById("background").value);
                if(controlPrimarySet) controlPrimary = "#"+String(document.getElementById("controlPrimary").value);
                if(controlPrimaryContentSet) controlPrimaryContent = "#"+String(document.getElementById("controlPrimaryContent").value);
                if(controlSecondarySet) controlSecondary = "#"+String(document.getElementById("controlSecondary").value);
                if(borderSet) border = "#"+String(document.getElementById("border").value);
                if(textSet) text = "#"+String(document.getElementById("text").value);

                if(background.length > 1) { code += '\n\t\t\t\t\tbackground: \''+background; hasPrev=true; }
                if(controlPrimary.length > 1) { if(hasPrev) {code+='\','} code += '\n\t\t\t\t\tcontrolPrimary: \''+controlPrimary; hasPrev=true; }
                if(controlPrimaryContent.length > 1) { if(hasPrev) {code+='\','} code += '\n\t\t\t\t\tcontrolPrimaryContent: \''+controlPrimaryContent; hasPrev=true; }
                if(controlSecondary.length > 1) { if(hasPrev) {code+='\','} code += '\n\t\t\t\t\tcontrolSecondary: \''+controlSecondary; hasPrev=true; }
                if(border.length > 1) { if(hasPrev) {code+='\','} code += '\n\t\t\t\t\tborder: \''+border; hasPrev=true; }
                if(text.length > 1)  { if(hasPrev) {code+='\','} code += '\n\t\t\t\t\ttext: \''+text; hasPrev=true; }
                if(hasPrev) {code+='\''}
                code += '\n\t\t\t\t}';
            }
            if(document.getElementById("method").value == "card") code += ',\n\t\t\t\tpayment_methods: [\'bank_card\']';
            else if(document.getElementById("method").value == "sber") code += ',\n\t\t\t\tpayment_methods: [\'sberbank\']';
            else if(document.getElementById("method").value == "yoo") code += ',\n\t\t\t\tpayment_methods: [\'yoo_money\']';
            else if(document.getElementById("method").value == "sbp") code += ',\n\t\t\t\tpayment_methods: [\'sbp\']';
            code += '\n\t\t\t},';
            code += '\n\t\t\terror_callback: function(error) {';
            code += '\n\t\t\t\tconsole.log(error)';
            code += '\n\t\t\t}';
            code += '\n\t\t});';
            code += '\n\t\t//–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ';
            code += '\n\t\tcheckout.render(\'payment-form\');';
            code += '\n\t</scr';
            code += 'ipt>';
            code += '\n</body>';
            code += '\n</html>';
            return String(code);
        }
        document.querySelector("#render").onclick = function(){
        if(document.getElementById("iscolor").checked) { usedcolors = true; } else { usedcolors = false; }
            token = document.getElementById("conftoken").value;            
            if(token.substring(0,2) == "ct")
            {   
                if(rendered)
                {
                    wdget.destroy();
                    rendered = false;
                    cust_colors = {  // default
                        background: '#2B2B2E',
                        border: '#b6b6b6',
                        control_secondary: '#484848',
                        text: '#b6b6b6',
                        control_primary: '#1A3D8A',
                        control_primary_content: '#FFFFFF'
                    };
                }
                if(usedcolors)
                {
                    if(backgroundSet) cust_colors.background = "#"+String(document.getElementById("background").value);
                    if(controlPrimarySet) cust_colors.controlPrimary = "#"+String(document.getElementById("controlPrimary").value);
                    if(controlPrimaryContentSet) cust_colors.controlPrimaryContent = "#"+String(document.getElementById("controlPrimaryContent").value);
                    if(controlSecondarySet) cust_colors.controlSecondary = "#"+String(document.getElementById("controlSecondary").value);
                    if(borderSet) cust_colors.border = "#"+String(document.getElementById("border").value);
                    if(textSet) cust_colors.text = "#"+String(document.getElementById("text").value);
                }
                if(document.getElementById("method").value == "card")
                {
                    render_request = {
                        confirmation_token: token, 
                        return_url: 'http://kiacode.space/return_url',
                        customization: {
                            colors: cust_colors,
                            payment_methods: ['bank_card']
                        },
                        error_callback: function(error) {
                            console.log(error)
                        }
                    }
                }
                else if(document.getElementById("method").value == "sber")
                {
                    render_request = {
                        confirmation_token: token, 
                        return_url: 'http://kiacode.space/return_url',
                        customization: {
                            colors: cust_colors,
                            payment_methods: ['sberbank']
                        },
                        error_callback: function(error) {
                            console.log(error)
                        }
                    }
                }
                else if(document.getElementById("method").value == "yoo")
                {
                    render_request = {
                        confirmation_token: token, 
                        return_url: 'http://kiacode.space/return_url',
                        customization: {
                            colors: cust_colors,
                            payment_methods: ['yoo_money']
                        },
                        error_callback: function(error) {
                            console.log(error)
                        }
                    }                    
                }
                else if(document.getElementById("method").value == "sbp")
                {
                    render_request = {
                        confirmation_token: token, 
                        return_url: 'http://kiacode.space/return_url',
                        customization: {
                            colors: cust_colors,
                            payment_methods: ['sbp']
                        },
                        error_callback: function(error) {
                            console.log(error)
                        }
                    }                    
                }
                else
                {                    
                    render_request = {
                        confirmation_token: token, 
                        return_url: 'http://kiacode.space/return_url',
                        customization: {
                            colors: cust_colors
                        },
                        error_callback: function(error) {
                            console.log(error)
                        }
                    }
                }
                if(document.getElementById("ismodal").checked)
                {
                    render_request.customization.modal = true;
                }           
                wdget = new window.YooMoneyCheckoutWidget(render_request);
                wdget.render('render-form');
                rendered = true;
            }
            else {
                alert('–í–≤–µ–¥–∏—Ç–µ confirmation token');
            }
        } 
    </script>
</body>
</html>